<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Veg Patch Â· The Colnesider</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>

<body>

<header class="site-header">
    <div class="header-inner">

        <div class="site-title">THE COLNESIDER</div>

        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="workshop.html">Workshop</a></li>
                <li><a href="wordsearch-90s.html">Word Search</a></li>
                <li><a href="travel.html">Travel</a></li>
                <li><a href="guestbook.html">Guest Book</a></li>
            </ul>
        </nav>

    </div>
</header>

<main>

<section class="content">

<div class="landing-intro">
    <h1>Veg Patch</h1>

   <p class="subtitle vegpatch-subtitle">
    Nine foot by nine foot of optimism, snail 'n' slug battles and hopefully some vegetables.
</p>

</div>

<!-- Willie Joe Widget -->
<div class="year-widget">

    <div class="month-row">
        <div class="month-box" id="monthBox">ðŸŒ± March</div>
        <div class="season-icon" id="seasonIcon">ðŸŒ±</div>
    </div>

    <div class="year-line">

        <div class="snow" id="snow"></div>
        <div class="drizzle" id="drizzle"></div>

        <img id="willie"
             class="willie"
             src="images/VegPatch/spring_wj.jpg"
             alt="Willie Joe walking">

    </div>

    <div class="season-caption" id="seasonCaption">
        Willie Joe isnâ€™t fussed about spring.
    </div>

</div>
<div class="willie-intro">
    <p>
        Meet <strong>Willie Joe</strong>, your gardening sprite-barometer-in-chief.
        Watch him walk the seasons â€” he should dress appropriately for each!
    </p>
</div>

<div class="intro-box">

    <p>
       Looking forward to getting growing again...updates to follow
    </p>

   

</div>

<!-- Veg Patch Diary -->
<div class="diary-section">

    <h2 class="vegpatch-heading">Veg Patch Diary</h2>

    <div class="diary-controls">
        <select id="cropFilter">
            <option value="all">All Crops</option>
        </select>

        <button id="sortNewest">Newest First</button>
    </div>

    <table class="diary-table">
        <thead>
            <tr>
                <th>Date</th>
                <th>Season</th>
                <th>Crop</th>
                <th>State</th>
                <th>Pests</th>
                <th>Notes</th>
            </tr>
        </thead>
        <tbody id="diaryBody"></tbody>
    </table>

</div>

    
<!-- Gallery -->
<div class="gallery-section">

  <h2 class="vegpatch-heading">Veg Patch Progress 2026</h2>

    <div class="gallery-item">
    <img src="images/VegPatch/comingsoon.jpg" alt="placeholder image">
</div>

<div class="gallery-item">
    <img src="images/VegPatch/comingsoon.jpg" alt="placeholder image">

</div>

<div class="gallery-item">
     <img src="images/VegPatch/comingsoon.jpg" alt="placeholder image">

</div>

<div class="gallery-item">
    <img src="images/VegPatch/comingsoon.jpg" alt="placeholder image">

</div>


</div>

</section>

</main>

<script>
let diaryEntries = [];

fetch("data/vegpatch-diary.json")
  .then(res => res.json())
  .then(data => {
    diaryEntries = data;
    populateCropFilter(data);
    renderTable(data);
  });

function populateCropFilter(entries) {
  const crops = [...new Set(entries.map(e => e.crop))];
  const filter = document.getElementById("cropFilter");

  crops.forEach(crop => {
    const opt = document.createElement("option");
    opt.value = crop;
    opt.textContent = crop;
    filter.appendChild(opt);
  });
}

function renderTable(entries) {
  const body = document.getElementById("diaryBody");
  body.innerHTML = "";

  entries.forEach(e => {
    const row = document.createElement("tr");

    row.innerHTML = `
      <td>${e.date}</td>
      <td>${seasonIcon(e.season)}</td>
      <td>${e.crop}</td>
      <td>${stateBadge(e.state)}</td>
      <td>${pestIcons(e.pests)}</td>
      <td>${e.comment}</td>
    `;

    body.appendChild(row);
  });
}

function seasonIcon(season) {
  const map = {
    winter: "â„",
    spring: "ðŸŒ±",
    summer: "â˜€",
    autumn: "ðŸ‚"
  };
  return map[season] || "";
}

function stateBadge(state) {
  const map = {
    seed: "ðŸŒ± Seed",
    direct_sow: "ðŸŒ¾ Direct Sow",
    seedling: "ðŸŒ¿ Seedling",
    established: "ðŸŒ³ Established",
    harvest: "ðŸ¥• Harvest"
  };
  return map[state] || state;
}

function pestIcons(pests) {
  if (!pests.length) return "â€”";

  const map = {
    slugs: "ðŸŒ",
    aphids: "ðŸœ",
    caterpillars: "ðŸ›"
  };

  return pests.map(p => map[p] || p).join(" ");
}

document.getElementById("cropFilter").addEventListener("change", e => {
  const crop = e.target.value;

  const filtered = crop === "all"
    ? diaryEntries
    : diaryEntries.filter(d => d.crop === crop);

  renderTable(filtered);
});

document.getElementById("sortNewest").addEventListener("click", () => {
  const sorted = [...diaryEntries]
    .sort((a, b) => new Date(b.date) - new Date(a.date));

  renderTable(sorted);
});
</script>

    
<script src="willie.js"></script>

</body>
</html>


